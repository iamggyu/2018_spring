$(document).ready(function() 
{
    var url = document.location;
    var isSimpleMode = true;
    var isModuleUrlView = true; // moduel url

    var filter = "win16|win32|win64|mac|macintel";
    var isMobile = false;

    if ( navigator.platform ) {
        if ( filter.indexOf( navigator.platform.toLowerCase() ) < 0 ) {
            isMobile = true;
        }
    }

/********************************************
    공통 form 개선
*********************************************/    
    if(url.pathname=='/course/modedit.php')
    {
        //식별번호 숨김(인덕대, 혜전대, 관광대, 배제대 제외)
        switch(url.hostname) {
            case 'lms.induk.ac.kr':
            case 'lms.hj.ac.kr':
            case 'hjlms.moodler.kr':
            case 'ktclms.moodler.kr':
            case 'e-learning.ktc.ac.kr':
            case 'pculms.moodler.kr':
            case 'cyber.pcu.ac.kr':
            break;
            default:
                $('#fitem_id_cmidnumber').hide();
        }

        //접근제한 CSS 보정
        setTimeout(function(){ $('#fitem_id_availabilityconditionsjson div.availability-field').css('padding','0px').css('border','0px'); }, 3000);
        setTimeout(function(){ $('#fitem_id_availabilityconditionsjson div.availability-button').css('margin-left','0px'); }, 3000);
        setTimeout(function(){ if(theme_coursemosv2.lang=='ko') { $('div.availability-none').text('설정되어 있지 않습니다.'); } }, 3000);

        //버튼 색 개선
        //$('#id_submitbutton').css('background-color','#5bc0de ').css('border-color','#46b8da ').on("mouseover",function() { $(this).css('background-color','#31b0d5').css('border-color','#269abc');  }).on("mouseout",function() { $(this).css('background-color','#5bc0de').css('border-color','#46b8da');  });
    }

    var isMForm=($('#mform1').attr('onsubmit')!=undefined) ? $('#mform1').attr('onsubmit'):'none';

/********************************************
    고급 설정 block 개선
*********************************************/    
    if($('#settingsnav'))
    {
        //user permissions
//        $("a[href*='/admin/roles/permissions.php']",$("#settingsnav li.type_setting")).remove();
        //check permissions
//        $("a[href*='/admin/roles/check.php']",$("#settingsnav li.type_setting")).remove();
        //other users
//        $("a[href*='/enrol/otherusers.php']",$("#settingsnav li.type_setting")).remove();
        //filters
//        $("a[href*='/filter/manage.php']",$("#settingsnav li.type_setting")).remove();
        //grades
//        $("a[href*='/grade/report/index.php']",$("#settingsnav li.type_setting")).remove();
        //publish
//        $("a[href*='/course/publish/index.php']",$("#settingsnav li.type_setting")).remove();

        //reports
//        $("#settingsnav li.type_course ul li.type_unknown").get(1).remove();
/*
        //불필요 메뉴 숨김
        var link;
        $("li",$('#settingsnav li.type_course ul')).each(function(i) { 
            link=$(this).find('a').attr('href'); if(link!='undefined') { 
                if(link.indexOf('/enrol/otherusers.php')>-1||
                    link.indexOf('/enrol/manual/unenrolself.php')>-1||
                    link.indexOf('/filter/manage.php')>-1||
                    link.indexOf('/grade/report/index.php')>-1||
                    link.indexOf('/course/publish/index.php')>-1||
                    link.indexOf('/course/reset.php')>-1) { 
                    
                        $(this).html(''); 
                    } 
                 }

             //서브 메뉴 존재하는 메뉴 숨김 (사용자, 문제은행 제외)
            //if($(this).hasClass('type_unknown')&&(i!=2&&i!=28)) { $(this).html(''); }
        });
    */}

/********************************************
    과제(activity_assign)
*********************************************/
// 고급설정 > 과제 관리     
    if(url.pathname=='/mod/assign/view.php' || url.pathname=='/grade/grading/manage.php' || url.pathname.indexOf('/grade/grading/form/rubric/')>-1 || url.pathname=='/grade/grading/pick.php')
    {
        $($("li",$("#settingsnav ul")).get(0)).css('background-color','#F5EFD7');
        var link;
        $("li",$('#settingsnav li.type_setting ul')).each(function(i) { 
            link=$(this).find('a').attr('href'); 
            if(link.indexOf('/admin/roles')>-1||link.indexOf('/filter/')>-1||link.indexOf('/report/log/')>-1||link.indexOf('/backup/')>-1) { $(this).html(''); }
         });

        //학습활동 블록 숨김
        $('div.block-quick-mod').addClass('hidden');
    }

// 과제 설정
    if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=assign')>-1) || isMForm.indexOf('mod_assign')>0) )
    {
        if(url.hostname!='cyber.gachon.ac.kr') {
            $('#fgroup_id_assignsubmission_onlinetext_wordlimit_group').hide();
        }
        $('#id_submissionsettings').hide();
        //$('#id_groupsubmissionsettings').hide();
        $('#id_feedbacktypes').hide();
        $('#id_notifications').hide();

        // $('#id_assignsubmission_file_maxfiles').val("10").prop("selected", true);
        // $('#id_submissiontypes').hide();   // 요청자 안태준 2016.11.09

        $('#id_modgrade_type').on("change",function() {
            if($(this).val()=='scale')
            {
                $('#id_modgrade_point').prev().prev().hide();
                $('#id_modgrade_point').prev().hide();
                $('#id_modgrade_point').hide();
                $('#id_modgrade_scale').prev().prev().show();
                $('#id_modgrade_scale').prev().show();
                $('#id_modgrade_scale').show();
            } else if($(this).val()=='point') { 
                $('#id_modgrade_scale').prev().prev().hide();
                $('#id_modgrade_scale').prev().hide();
                $('#id_modgrade_scale').hide();
                $('#id_modgrade_point').prev().prev().show();
                $('#id_modgrade_point').prev().show();
                $('#id_modgrade_point').show();
            } 
        });
        $('#id_modgrade_scale').prev().prev().hide();
        $('#id_modgrade_scale').prev().hide();
        $('#id_modgrade_scale').hide();

        $('#fitem_id_gradepass').hide();
        setTimeout(function(){ $('#id_modstandardgrade div.moreless-actions').hide(); }, 3000);

        //과제 수행을 위한 소속팀 필요여부 - 17.09.06 OBJ
        $('#fitem_id_preventsubmissionnotingroup').hide();
        $('#id_preventsubmissionnotingroup').val(1).prop("selected", true);
        

        //제출 버튼 보이기 위치 이동
        var $temp = $("#fitem_id_submissiondrafts").clone(); $temp.removeClass("show"); $("#fitem_id_submissiondrafts").remove(); $("#fitem_id_requireallteammemberssubmit").before($temp);
        if($('#id_teamsubmission').attr('type')=="hidden") $('#id_submissiondrafts').attr('disabled', 'true');

                // 버튼 삭제
                $('#id_submitbutton2').hide();
                if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton').val('저장'); }
    }

//과제 확인
    if(url.pathname=='/mod/assign/view.php' && url.search.indexOf('?id=')>-1 && url.search.indexOf('&action=')==-1)
    {
        //$('div.submissionlinks > a').css('background-color','#337ab7').css('border-color','#2e6da4').css('color','#fff');
        $('div.submissionlinks a').addClass('btn-primary').addClass('write');
        $('div.singlebutton input.btn').addClass('form-submit');

        // copykiller preview
            var copykiller_sites = ['tls.kku.ac.kr','kkulmscm3.moodler.kr','cyber.inu.ac.kr','inulmscm3.moodler.kr'];
            var copykiller_text = (theme_coursemosv2.lang=='ko') ? '표절검사 해보기':'plagiarism check';
            if(jQuery.inArray(url.hostname,copykiller_sites)>-1) {
                $('div.submissionaction').append('<div class="singlebutton" style="float:right;"><a href="http://'+url.hostname+'/copykiller/login.php" class="btn btn-success" target="_blank">' + copykiller_text + '</a></div>');
        }

    }


//과제 제출하기
     if(url.pathname=='/mod/assign/view.php' && url.search.indexOf('&action=editsubmission')>-1)
    {
        var text_ko = "[저장] 버튼을 클릭 시 최종 과제 제출일이 업데이트 되오니 주의하세요.";
        var text_en = "Please note that clicking [Save changes] changes the latest submission date.";
        if($('#id_submitbutton').val()=='저장')
        { 
            $('#fgroup_id_buttonar div.fgroup').append("<div style='margin-top:10px;margin-left:5px;color:#d9534f;font-weight:bold;'>"+text_ko+"</div>"); 
        } else {
            $('#fgroup_id_buttonar div.fgroup').append("<div style='margin-top:10px;margin-left:5px;color:#d9534f;font-weight:bold;'>"+text_en+"</div>"); 
        }
    }

//과제 채점하기
    if(url.pathname=='/mod/assign/view.php' && url.search.indexOf('action=grading')>-1 )
    {
        $('table.generaltable thead th').css('white-space','nowrap');

        //사진
        $('table.generaltable thead th.c1').hide();
        $('table.generaltable tbody td.c1').hide();

        //이름
        $('table.generaltable tbody td.c2').css('white-space','nowrap');
        //학번
        $('table.generaltable tbody td.c3').css('white-space','nowrap');
        //채점 상태
        $('table.generaltable tbody td.c4').css('white-space','nowrap');

        //성적

        //편집
        $('table.generaltable .textmenu').html('<img src="/theme/image.php/coursemosv2/core/1468025184/i/settings" />');

        //제출 수정일
        $('table.generaltable tbody td.c7').css('white-space','nowrap');

        //직접입력
        $('table.generaltable tbody td.c8').css('text-align','center').css('white-space','nowrap');
        $('table.generaltable tbody td.c8 div.no-overflow').hide();

        //첨부파일
        $('table.generaltable tbody td.c9').css('white-space','nowrap');

        //제출물 설명
        //$('table.generaltable thead th.c10').hide();
        //$('table.generaltable tbody td.c10').hide();

        //채점 수정일

        //피드백 첨부파일
        if(url.hostname!='etl.snu.ac.kr') {
            //$('table.generaltable thead th.c14').hide();
            //$('table.generaltable tbody td.c14').hide();
        }


        $('#fitem_id_showonlyactiveenrol').hide();

        $('#fitem_id_sendstudentnotifications').hide();
        $('#fitem_id_savequickgrades').css('margin-top','20px');
        $('#id_savequickgrades').addClass('form-submit');
    }

//과제 개별 채점하기
    if(url.pathname=='/mod/assign/view.php' && url.search.indexOf('&action=grade')>-1)
    {
        $('#fitem_id_sendstudentnotifications').hide();
        $('#id_savegrade').addClass('form-submit');
    }

/********************************************
    퀴즈(activity_quiz)
*********************************************/
// 퀴즈
    if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=quiz')>-1) || isMForm.indexOf('mod_quiz')>0) ) 
    {
        $('#id_timing').removeClass('collapsed');
		if(url.hostname != 'snowboard.sookmyung.ac.kr') {
			$('#id_display').hide();
		}
        if(url.hostname == 'tls.kku.ac.kr')
                {
            $('#id_security').click(function(){
                $('#id_security div.moreless-actions').hide();
            });
        } else {
            if(url.hostname != 'smart.wsu.ac.kr' && url.hostname !='plms.pusan.ac.kr') {
                $('#id_security').hide();
            }
        }
        $('#id_overallfeedbackhdr').hide();

        if(url.hostname != 'etl.snu.ac.kr' && url.hostname != 'snowboard.sookmyung.ac.kr') {

			// 피드백
			// 전반적인피드백 삭제
			$('#fgroup_id_duringoptionsgrp fieldset > span').get(6).remove();
			$('#fgroup_id_immediatelyoptionsgrp fieldset > span').get(6).remove();
			$('#fgroup_id_openoptionsgrp fieldset > span').get(6).remove();
			$('#fgroup_id_closedoptionsgrp fieldset > span').get(6).remove();

			// 일반적인 피드백
			if(url.hostname != 'lms.induk.ac.kr' && url.hostname != 'ecampus.smu.ac.kr' ) {
				$('#fgroup_id_duringoptionsgrp fieldset > span').get(4).remove();
				$('#fgroup_id_immediatelyoptionsgrp fieldset > span').get(4).remove();
				$('#fgroup_id_openoptionsgrp fieldset > span').get(4).remove();
				$('#fgroup_id_closedoptionsgrp fieldset > span').get(4).remove();
			}

			if (url.hostname != 'plms.pusan.ac.kr') {
				// 구체적인피드백 삭제
				$('#fgroup_id_duringoptionsgrp fieldset > span').get(3).remove();
				$('#fgroup_id_immediatelyoptionsgrp fieldset > span').get(3).remove();
				$('#fgroup_id_openoptionsgrp fieldset > span').get(3).remove();
				$('#fgroup_id_closedoptionsgrp fieldset > span').get(3).remove();

				// 정답여부
				$('#fgroup_id_duringoptionsgrp fieldset > span').get(1).remove();
				$('#fgroup_id_immediatelyoptionsgrp fieldset > span').get(1).remove();
				$('#fgroup_id_openoptionsgrp fieldset > span').get(1).remove();
				$('#fgroup_id_closedoptionsgrp fieldset > span').get(1).remove();
			}
        }

        // 버튼 삭제
        $('#id_submitbutton2').hide();
        if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton').val('저장'); }
    }

    if(url.pathname=='/mod/quiz/view.php' || 
        url.pathname=='/mod/quiz/edit.php' || 
        url.pathname=='/mod/quiz/report.php' || 
        url.pathname=='/mod/quiz/review.php' ||  
        url.pathname=='/mod/quiz/attempt.php' || 
        url.pathname=='/mod/quiz/summary.php'  || 
        url.pathname=='/mod/quiz/overrides.php' || 
        (url.pathname=='/course/modedit.php' && isMForm.indexOf('mod_quiz')>0))
    {
        //학습활동 블록 숨김
        $('div.block-quick-mod').addClass('hidden');

        $($("li",$("#settingsnav ul")).get(0)).css('background-color','#F5EFD7');
        var link;
        $("li",$('#settingsnav li.type_setting ul')).each(function(i) {
            link=$(this).find('a').attr('href');
            if(link.indexOf('/admin/roles/assign.php')>-1||link.indexOf('/admin/roles/check.php')>-1||link.indexOf('/filter/')>-1||link.indexOf('/report/log/')>-1||link.indexOf('/backup/')>-1) { $(this).html(''); }
        }); 
        $("a[href*='/mod/quiz/report.php'][href*=overview]",$("li.type_setting")).each(function() { $(this).attr("href",$(this).attr("href")+"&slotmarks=0"); });
        //$("a[href*='/mod/quiz/report.php'][href*=responses]",$("li.type_setting")).remove();
    }

// 퀴즈 확인    
    if(url.pathname=='/mod/quiz/view.php')
    {
        //결과 보기 단순화
        var href=$('div.quizattemptcounts > a').attr('href'); $('div.quizattemptcounts > a').attr('href',href+'&slotmarks=0');
        if(theme_coursemosv2.lang=='ko') { $('div.quizattemptcounts > a').text($('div.quizattemptcounts > a').text()+'명'); }
        
        if(url.hostname == 'myclass.sch.ac.kr')
        {
            if(isMobile==true)
            {
                $('div.quizstartbuttondiv form div input[type=submit]').hide();
                $('div.quizstartbuttondiv form div input[type=submit]').after('<p><br /><font color="#CC0000"><b>모바일에서는 시험응시가 불가능합니다. <br />PC에서 확인하세요.</b></font></p>');
            } else {
                if($('table.quizattemptsummary').length>0){ $('div.quizattempt').hide(); }
            }

        }

        $('div.quizinfo p').first().css('font-weight','bold');
        $('div.quizinfo p').last().css('font-weight','bold');
        $('div.singlebutton input[type=submit]').css('color','#fff').css('background-color','#5bc0de ').css('border-color','#46b8da ').on("mouseover",function() { $(this).css('background-color','#31b0d5').css('border-color','#269abc');  }).on("mouseout",function() { $(this).css('background-color','#5bc0de').css('border-color','#46b8da');  });
    }

    if(url.pathname=='/mod/quiz/report.php')
    {
        if(url.search.indexOf('&mode=overview')>-1 || url.search.indexOf('&mode=responses')>-1) {
            $('#region-main h2').next().addClass('alert').addClass('alert-success').css('margin-left','0px').css('font-weight','bold');
        }

        if(url.search.indexOf('&mode=overview')>-1 || $('#mform1 input[name=mode]').val()=='overview'){
            if(theme_coursemosv2.lang=='ko') { $('#region-main h2').next().text($('#region-main h2').next().text()+'명'); }
            $('#id_preferencesuser').addClass('collapsed');
            if($('#menudownload')) {
                $('#mform1').next().hide(); $('#mform1').next().next().hide();
                $('#menudownload').val('excel');
                $('#menudownload').next().removeClass('btn-default').addClass('btn-info');
            }
            if($('#attempts')) {
                $('#attempts th').css('text-align','center');
                $('#attempts td').css('text-align','center');
            }
            $('a.reviewlink').append('<img src="http://newcyber.moodler.co.kr/theme/image.php?theme=coursemosv2&amp;component=core&amp;rev=1470896408&amp;image=i%2Fpreview" width="12" height="12" />');
        }
    }

    if(url.pathname=='/mod/quiz/review.php')
    {
        $('div.othernav > a').addClass('btn').addClass('btn-info');
        $('div.submitbtns > a').addClass('btn').addClass('btn-info');
    }

    if(url.pathname=='/mod/quiz/attempt.php' || url.pathname=='/mod/quiz/summary.php')
    {
        $('div.othernav > a').addClass('btn').addClass('btn-warning');
        $('div.submitbtns input[type=submit]').removeClass('btn-default').addClass('btn-info');
    }

// 퀴즈 답안 제출
    if(url.pathname=='/mod/quiz/summary.php')
    {
        $('div.othernav a.endtestlink').hide();
        if(url.hostname != 'lms.induk.ac.kr') {
            $('div.submitbtns form div input[type=submit]').first().hide();
        }
    }

// 퀴즈 편집    
    if(url.pathname=='/mod/quiz/edit.php')
    {

        $('div.statusdisplay').css('background-color','#f2dede').css('border-color','#ebccd1').css('color','#a94442');
        $('#inputmaxgrade').css('width','60px');

        $('div.last-add-menu ul li a span').first().addClass('btn').addClass('btn-success');
        $('div.last-add-menu ul li a b').remove();
        $('div.last-add-menu').css('margin','0px').css('margin-top','20px');

        //첫번째 section heading 삭제
        $('div.content div.instancesectioncontainer').first().hide();

        //랜덤 문제 추가 삭제
        //$('ul.menu').each(function(i){  $(this).children().last().remove();  });
    }

// 문제은행
    if(url.pathname=='/question/edit.php')
    {
        $('#qbshowtext_on').parent().hide();
        $('#advancedsearch').hide();
        $('.sorters').hide();
        $('#displayoptions div div.categoryinfo').hide();  //... 공유되었습니다.
    }

// 문제은행 > 미리보기
    if(url.pathname=='/question/preview.php')
    {
        $('#techinfo').hide();
        $('form.mform').hide();
    }

// 문제은행 > 문제 유형 추가    
    if(url.pathname=='/question/question.php')
    {
        switch(url.hostname) {
            case 'lms.induk.ac.kr':
            case 'ecampus.smu.ac.kr':
            case 'etl.snu.ac.kr':
	        case 'snowboard.sookmyung.ac.kr':
            break;
            default:
                $('#fitem_id_generalfeedback').hide();
            break;
        }
        /*
        if(url.hostname != 'lms.induk.ac.kr' && url.hostname != 'ecampus.smu.ac.kr' && url.hostname != 'etl.snu.ac.kr') {
            $('#fitem_id_generalfeedback').hide();
        }
        */

        //선다형
        if(url.search.indexOf('&qtype=multichoice')>0 || $('#mform1 input:hidden[name=qtype]').val()=="multichoice")
        {
            $('#id_answernumbering').val('123');

            //용어 수정
            if(theme_coursemosv2.lang=='ko') { $('div.fitem_fselect').each(function(i){ if($(this).attr('id').indexOf('fitem_id_fraction_')>-1){ $(this).find('label').text('점수반영비율'); } }); }

            if(url.hostname!='etl.snu.ac.kr') {
                //보기 피드백 삭제
                $('div.fitem_feditor').each(function(i){ if($(this).attr('id').indexOf('fitem_id_feedback_')>-1) { $(this).find('div').hide(); } }); //html(''); }  });
                //보기 추가 금지
                //$('#fitem_id_addanswers').hide();    

                //정답 피드백 숨김
                switch(url.hostname) {
                    case 'snowboard.sookmyung.ac.kr':
                        break;
                    default:
                        $('#id_combinedfeedbackhdr').hide();    
                }
            }

            //감정비율
            $('#id_penalty').val('0');
            //힌트 삭제
            $('#fitem_id_hint_0').hide();
            $('#fitem_id_hint_1').hide();
            $('#fgroup_id_hintoptions_0').hide();
            $('#fgroup_id_hintoptions_1').hide();
            $('#fitem_id_addhint').hide();
        }

        //주관식단답형
        if(url.search.indexOf('&qtype=shortanswer')>0 || $('#mform1 input:hidden[name=qtype]').val()=="shortanswer")
        {
            //용어 수정
            if(theme_coursemosv2.lang=='ko') { $('label.accesshide').each(function(i){ if($(this).attr('for').indexOf('id_fraction_')>-1){ $(this).text('점수반영비율'); } });  }

            if(url.hostname!='etl.snu.ac.kr') {
                switch(url.hostname) {
                    case 'snowboard.sookmyung.ac.kr':
                        break;
                    default:
                        //보기 피드백 삭제
                        $('div.fitem_feditor').each(function(i){ if($(this).attr('id').indexOf('fitem_id_feedback_')>-1) { $(this).find('div').hide(); }  });
                        //정답 피드백 숨김
                        $('#id_combinedfeedbackhdr').hide();  
                }
            }

            //감정비율
            $('#id_penalty').val('0');
            //힌트 삭제
            $('#fitem_id_hint_0').hide();
            $('#fitem_id_hint_1').hide();
            $('#fgroup_id_hintoptions_0').hide();
            $('#fgroup_id_hintoptions_1').hide();
            $('#fitem_id_addhint').hide();
        }

        //서술형
        if(url.search.indexOf('&qtype=essay')>0 || $('#mform1 input:hidden[name=qtype]').val()=="essay") 
        {
            $('#id_responsetemplateheader').addClass('collapsed');
            $('#id_graderinfoheader').hide();
        }

        //OX형
        if(url.search.indexOf('&qtype=truefalse')>0 || $('#mform1 input:hidden[name=qtype]').val()=="truefalse")
        {
            if(url.hostname!='etl.snu.ac.kr') {
                $('#fitem_id_feedbacktrue').hide();
                $('#fitem_id_feedbackfalse').hide();
            }
            $('#id_multitriesheader').hide();
        }

        //짝짓기형
        if(url.search.indexOf('&qtype=match')>0 || $('#mform1 input:hidden[name=qtype]').val()=="match")
        {
            //정답 피드백 숨김
            $('#id_combinedfeedbackhdr').hide();

            //감정비율
            $('#id_penalty').val('0');
            //힌트 삭제
            $('#fitem_id_hint_0').hide();
            $('#fitem_id_hint_1').hide();
            $('#fgroup_id_hintoptions_0').hide();
            $('#fgroup_id_hintoptions_1').hide();
            $('#fitem_id_addhint').hide();
        }

        //빈칸채우기형
        if(url.search.indexOf('&qtype=multianswer')>0 || $('#mform1 input:hidden[name=qtype]').val()=="multianswer")
        {
            //감정비율
            $('#id_penalty').val('0');
            //힌트 삭제
            $('#fitem_id_hint_0').hide();
            $('#fitem_id_hint_1').hide();
            $('#fgroup_id_hintoptions_0').hide();
            $('#fgroup_id_hintoptions_1').hide();
            $('#fitem_id_addhint').hide();
        }
        
        //수치형
        if(url.search.indexOf('&qtype=numerical')>0 || $('#mform1 input:hidden[name=qtype]').val()=="numerical")
        {
            //용어 수정
            if(theme_coursemosv2.lang=='ko') { $('label.accesshide').each(function(i){ if($(this).attr('for').indexOf('id_fraction_')>-1){ $(this).text('점수반영비율'); } });  }
            //보기 피드백 삭제
            $('div.fitem_feditor').each(function(i){ if($(this).attr('id').indexOf('fitem_id_feedback_')>-1) { $(this).find('div').hide(); }  });
            //보기 추가 금지
            //$('#fitem_id_addanswers').hide();


            //정답 피드백 숨김
            $('#id_combinedfeedbackhdr').hide();

            //감정비율
            $('#id_penalty').val('0');
            //힌트 삭제
            $('#fitem_id_hint_0').hide();
            $('#fitem_id_hint_1').hide();
            $('#fgroup_id_hintoptions_0').hide();
            $('#fgroup_id_hintoptions_1').hide();
            $('#fitem_id_addhint').hide();
        }

    }

/********************************************
    투표(activity_choice)
*********************************************/
// 투표
    if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=choice')>-1) || isMForm.indexOf('mod_choice')>0) )
    {
        $('#id_showunanswered').val("1");
        $('#fitem_id_showunanswered').hide();
        $('#fitem_id_includeinactive').hide();

        if(theme_coursemosv2.lang=='ko') 
        {
            $('#id_optionhdr > legend > a').text('문항 설정');
            $('#id_option_add_fields').val('문항 추가').removeClass('btn-default').addClass('btn-info');
        }

                // 버튼 삭제
                $('#id_submitbutton2').hide();
                if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton').val('저장'); }
    }

// 투표 확인
    if(url.pathname=='/mod/choice/view.php')
    {
        $("div.expired").css('background-color','#f2dede').css('border-color','#ebccd1').css('color','#a94442');
        $('#region-main input[type=submit]').removeClass('btn-default').addClass('btn-info');
    }

// 투표 결과
    if(url.pathname=='/mod/choice/report.php')
    {
        $('div.downloadreport ul li').each(function(i){ if(i!=1) $(this).html(''); });

        var temp=$('div.downloadreport').clone();
        $('div.downloadreport').remove();$('h3').after(temp);
        $('div.downloadreport ul li input[type=submit].btn').css('color','#fff').css('background-color','#5cb85c').css('border-color','#4cae4c ').on("mouseover",function() { $(this).css('background-color','#449d44').css('border-color','#398439'); }).on("mouseout",function() { $(this).css('background-color','#5cb85c').css('border-color','#4cae4c'); });

        $('div.downloadreport').css('margin','0px');
        $('div.downloadreport ul li').css('float','right').css('margin-right','80px');

        var temp2=$('div.responseaction div.singleselect div').html();
        $('div.responseaction div.singleselect').remove();
        $('div.responseaction label').css('margin-left','10px').css('margin-right','10px').after(temp2);
        $('div.responseaction a').first().removeClass('btn-default').addClass('btn-info');
    }

    if(url.pathname=='/mod/choice/view.php' ||
        url.pathname=='/mod/choice/report.php' ||
                (url.pathname=='/course/modedit.php' && isMForm.indexOf('mod_choice')>0))
        {
                //학습활동 블록 숨김
                $('div.block-quick-mod').addClass('hidden');

                $($("li",$("#settingsnav ul")).get(0)).css('background-color','#F5EFD7');
                var link;
                $("li",$('#settingsnav li.type_setting ul')).each(function(i) {
                        if(i!=0) $(this).html('');
                });
        }

/********************************************
    설문조사(activity_feedback)
*********************************************/
//설문조사
    if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=feedback')>-1) || isMForm.indexOf('mod_feedback')>0) )
    {
        $('#id_timinghdr').removeClass('collapsed');
        $('#fitem_id_email_notification').hide();
        $("#id_autonumbering").val("1");
        $('#id_feedbackhdr').removeClass('collapsed');

                // 버튼 삭제
                $('#id_submitbutton2').hide();
                if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton').val('저장'); }
    }


//설문조사 > 문항편집
    if(url.pathname=='/mod/feedback/edit_item.php')
    {
		if(url.hostname != 'ecampus.smu.ac.kr') {
			$('#fitem_id_label').hide();
		}

        if($("input[name=typ]").attr("value") == 'multichoice' )
        {    //선다 typ=multichoice
            $("#id_hidenoselect").val("1");
            $('#fitem_id_hidenoselect').hide();
        } else if($("input[name=typ]").attr("value") == 'multichoicerated' )
        {    //선다(등급) typ=multichoicerated
            $("#id_hidenoselect").val("1");
            $('#fitem_id_hidenoselect').hide();
        } else if($("input[name=typ]").attr("value") == 'multichoicerated' )
        {    //선다(등급) typ=multichoicerated
            $("#id_hidenoselect").val("1");
            $('#fitem_id_hidenoselect').hide();
        }
    }
    
//설문조사 >  응답보기
    if(url.pathname=='/mod/feedback/show_entries.php' && url.search.indexOf('do_show=showentries')>-1 )
    {
        $(".initialbar.firstinitial").hide();
        $(".initialbar.lastinitial").hide();
    }

    if(url.pathname== '/mod/feedback/import.php') {
            if(theme_coursemosv2.lang=='ko') {
                $('#page-mod-feedback-import #fgroup_id_buttonar .felement input#id_submitbutton').before('<div class="fitem"><div class="felement"><span style="color:red; font-weight:bold;">설문조사 모듈에서 작성, 내보내기로 저장된 XML파일만 가져오기 가능합니다.</span></div></div>');
            } else {
                $('#page-mod-feedback-import #fgroup_id_buttonar .felement input#id_submitbutton').before('<div class="fitem"><div class="felement"><span style="color:red; font-weight:bold;">File format available: a XML file exported from the Survey module(only)</span></div></div>');
            }
    }


/********************************************
        팀플평가(activity_ubpeer)
*********************************************/
//팀플평가
        if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=ubpeer')>-1) || isMForm.indexOf('mod_ubpeer')>0) )
        {
            // 버튼 삭제
            $('#id_submitbutton2').hide();
            if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton').val('저장'); }
        }

        if(url.pathname=='/mod/ubpeer/view.php' ||
                url.pathname=='/mod/ubpeer/evaluation.php' || 
                url.pathname=='/mod/ubpeer/options.php' || url.pathname=='/mod/ubpeer/result.php' || 
                url.pathname=='/mod/ubpeer/status.php' || 
                (url.pathname=='/course/modedit.php' && isMForm.indexOf('mod_ubpeer')>0))
        {
            //학습활동 블록 숨김
            $('div.block-quick-mod').addClass('hidden');

            $($("li",$("#settingsnav ul")).get(0)).css('background-color','#F5EFD7');
            var link;
            $("li",$('#settingsnav li.type_setting ul')).each(function(i) {
                if(i!=0) $(this).html('');
            });
        }


/********************************************
        채팅방(activity_ubchat)
*********************************************/
//채팅방
        if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=ubchat')>-1) || isMForm.indexOf('mod_ubchat')>0) )
        {
            // 버튼 삭제
            $('#id_submitbutton2').hide(); 
            if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton').val('저장'); }
        }

        if(url.pathname=='/mod/ubchat/view.php' ||
                (url.pathname=='/course/modedit.php' && isMForm.indexOf('mod_ubchat')>0))
        {
            //학습활동 블록 숨김
            $('div.block-quick-mod').addClass('hidden');

            $($("li",$("#settingsnav ul")).get(0)).css('background-color','#F5EFD7');
            var link;
            $("li",$('#settingsnav li.type_setting ul')).each(function(i) {
                    if(i!=0) $(this).html('');
            });
        }

/********************************************
        토론방(activity_forum)
*********************************************/
//토론방
    if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=forum')>-1) || isMForm.indexOf('mod_forum')>0) )
    {
        $('#id_name').after('<div style="color:#b92626;">[토론기간설정]은 페이지 아래 <b>[접근제한] > [날짜]</b> 에서 기간형성을 하시기 바랍니다.</div>');
        $('#id_attachmentswordcounthdr').hide();

        if(url.hostname=='myclass.sch.ac.kr') {
            $("select[id='id_type'] option[value='eachuser']").remove();
            $("select[id='id_type'] option[value='single']").remove();
            $("select[id='id_type'] option[value='qanda']").remove();
        }


        //구독 옵션
        $('#id_forcesubscribe').val('3');
        $('#id_subscriptionandtrackinghdr').hide();

        //게시한도
        $('#id_blockafterheader').hide();

        // 버튼 삭제
        $('#id_submitbutton2').hide();
        if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton').val('저장'); }
    }

//토론방 글쓰기
    if(url.pathname=='/mod/forum/post.php')
    {
        $('#fitem_id_discussionsubscribe').hide();
        $('#fitem_id_mailnow').hide();
    }

//토론방 보기
    if(url.pathname=='/mod/forum/view.php')
    {
        //$('.lastpost').css('width','170px');
        $('td.lastpost, th.lastpost').css('width','170px');

    }
    if(url.pathname=='/mod/forum/view.php' ||
        url.pathname=='/mod/forum/post.php' || 
        url.pathname=='/mod/forum/discuss.php' ||
                (url.pathname=='/course/modedit.php' && isMForm.indexOf('mod_forum')>0))
    {
                //학습활동 블록 숨김
                $('div.block-quick-mod').addClass('hidden');

                $($("li",$("#settingsnav ul")).get(0)).css('background-color','#F5EFD7');
                var link;
                $("li",$('#settingsnav li.type_setting ul')).each(function(i) {
            if(i!=0) $(this).html('');
                });
    }


/********************************************
        게시판(activity_ubboard)
*********************************************/
//게시판
    if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=ubboard')>-1) || isMForm.indexOf('mod_ubboard')>0) )
    {
        $('#id_etc_settings').removeClass('collapsed');

        // 버튼 삭제
        $('#id_submitbutton2').hide();
        if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton').val('저장'); }
    }

    if(url.pathname=='/mod/ubboard/view.php' || url.pathname=='/mod/ubboard/article.php' || url.pathname=='/mod/ubboard/modify.php' || url.pathname=='/mod/ubboard/write.php' || url.pathname=='/mod/ubboard/category.php' || url.pathname=='/mod/ubboard/category_modify.php' || (url.pathname=='/course/modedit.php' && isMForm.indexOf('mod_ubboard')>0))
    {
        //학습활동 블록 숨김
        $('div.block-quick-mod').addClass('hidden');

        $($("li",$("#settingsnav ul")).get(0)).css('background-color','#F5EFD7');
        var link;
        $("li",$('#settingsnav li.type_setting ul')).each(function(i) {
            link=$(this).find('a').attr('href');
            if(link.indexOf('/admin/roles/assign.php')>-1||link.indexOf('/admin/roles/check.php')>-1||link.indexOf('/filter/')>-1||link.indexOf('/report/log/')>-1||link.indexOf('/backup/')>-1) { $(this).html(''); }
        });
    }

/********************************************
        위키(activity_wiki)
*********************************************/
//wiki
    if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=wiki')>-1) || isMForm.indexOf('mod_wiki')>0) )
    {
        $('#id_wikifieldset').hide();

        // 버튼 삭제
        $('#id_submitbutton2').hide();
        if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton').val('저장'); }
    }

//wiki 편집
    if(url.pathname=='/mod/wiki/edit.php')
    {
        $('#fgroup_id_buttonar #save').css('color','#fff').css('background-color','#337ab7 ').css('border-color','#2e6da4').on("mouseover",function() { $(this).css('background-color','#286090').css('border-color','#204d74');  }).on("mouseout",function() { $(this).css('background-color','#337ab7').css('border-color','#2e6da4');  });
        $('#fgroup_id_buttonar #preview').css('color','#fff').css('background-color','#5bc0de ').css('border-color','#46b8da ').on("mouseover",function() { $(this).css('background-color','#31b0d5').css('border-color','#269abc');  }).on("mouseout",function() { $(this).css('background-color','#5bc0de').css('border-color','#46b8da');  });
        
    }

//wiki 파일
    if(url.pathname=='/mod/wiki/files.php')
    {
        //파일이 등록되었을 경우
        $('#ygtv0').css('margin-top','20px').css('margin-bottom','20px').css('padding-bottom','20px').css('border-bottom','1px solid #D9D9D9');

        $('div.box div.generalbox').css('text-align','center').css('margin-top','20px').css('margin-bottom','20px');
        $('div.singlebutton').css('text-align','center');
        $('div.singlebutton input[type=submit].btn').css('color','#fff').css('background-color','#5cb85c').css('border-color','#4cae4c').on("mouseover",function() { $(this).css('background-color','#449d44').css('border-color','#398439'); }).on("mouseout",function() { $(this).css('background-color','#5cb85c').css('border-color','#4cae4c'); });
    }    

        if(url.pathname=='/mod/wiki/view.php' ||
        url.pathname=='/mod/wiki/edit.php' || 
        url.pathname=='/mod/wiki/comments.php' || url.pathname=='/mod/wiki/editcomments.php' || 
        url.pathname=='/mod/wiki/history.php' || url.pathname=='/mod/wiki/diff.php' || 
                url.pathname=='/mod/wiki/map.php' ||
                url.pathname=='/mod/wiki/files.php' || url.pathname=='/mod/wiki/filesedit.php' || 
        url.pathname=='/mod/wiki/admin.php' ||
                (url.pathname=='/course/modedit.php' && isMForm.indexOf('mod_wiki')>0))
        {
                //학습활동 블록 숨김
                $('div.block-quick-mod').addClass('hidden');

                $($("li",$("#settingsnav ul")).get(0)).css('background-color','#F5EFD7');
                var link;
                $("li",$('#settingsnav li.type_setting ul')).each(function(i) {
                        if(i!=0) $(this).html('');
                });
        }

/********************************************
        턴잇인(activity_turnitin)
*********************************************/
// 턴잇인
        if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=turnitintooltwo')>-1) ||  ( isMForm.indexOf('mod_turnitintooltwo')>-1 ) ))
        {
                var text_ko="학생들에게 포털에서 메일을 등록하도록 안내해 주세요.";
                var text_en="Please ask students for their e-mail uploaded at Portal.";
                var text=(theme_coursemosv2.lang=='ko') ? text_ko:text_en;

                $('#fitem_id_name').before('<div class="alert alert-danger">'+ text +'</div>');
        $('#id_reportgenspeed').val('2');

                // 버튼 삭제
                $('#id_submitbutton2').hide();
                if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton').val('저장'); }
        }

/********************************************
    파일(resource_file)
*********************************************/
// 파일
    if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=ubfile')>-1) ||  ( isMForm.indexOf('mod_ubfile')>-1 ) ))
    {
        $('#fitem_id_showsize').hide();
        $("#fitem_id_showtype").hide();
        setTimeout(function(){ $('div.moreless-actions').hide(); }, 3000);

        $('#id_submitbutton').hide();
        if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton2').val('저장'); }    
    }
    if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=resource')>-1) ||  ( isMForm.indexOf('mod_resource')>-1 ) ))
    {
        $('#id_optionssection').hide();

                $('#id_submitbutton').hide();
                if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton2').val('저장'); }
    }

/********************************************
    URL 링크(resource_url)
*********************************************/
// URL 링크
    if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=url')>-1) || isMForm.indexOf('mod_url')>0) )
    {
        if(url.hostname!='snowboard.sookmyung.ac.kr') {
            $('#id_optionssection').hide();
        }
        $('#id_parameterssection').hide();

                $('#id_submitbutton').hide();
                if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton2').val('저장'); }
    }

/********************************************
        개요(resource_label)
*********************************************/
// 개요
        if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=label')>-1) || isMForm.indexOf('mod_label')>0) )
        {
                if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton2').val('저장'); }        
    }

/********************************************
    웹문서(resource_page)
*********************************************/
// 웹문서
    if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=page')>-1) || isMForm.indexOf('mod_page')>0) )
    {
        $('#id_appearancehdr').hide();

        $('#id_submitbutton').hide();
        if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton2').val('저장'); }
    }

        if(url.pathname=='/mod/page/view.php' ||
                (url.pathname=='/course/modedit.php' && isMForm.indexOf('mod_page')>0))
        {
                //학습활동 블록 숨김
                $('div.block-quick-mod').addClass('hidden');

                $($("li",$("#settingsnav ul")).get(0)).css('background-color','#F5EFD7');
                var link;
                $("li",$('#settingsnav li.type_setting ul')).each(function(i) {
                        if(i!=0) $(this).html('');
                });
        }
    if(url.pathname=='/mod/page/view.php')
    {
        var text=(theme_coursemosv2.lang=='ko') ? '돌아가기':'Go back';
        $('div.modified').after('<div style="text-align:center"><button class="btn btn-info" onclick="history.go(-1);">'+text+'</button></div>');
    }

/********************************************
    폴더(resource_folder)
*********************************************/
// 폴더
    if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=folder')>-1) || isMForm.indexOf('mod_folder')>0) )
    {
        if(theme_coursemosv2.lang=='ko')
        {
            $('#fitem_id_files label').text('파일선택');
        }
        $('#fitem_id_display').hide();
        $('#fitem_id_showexpanded').hide();

        $('#id_submitbutton').hide();
        if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton2').val('저장'); }
    }

    if(url.pathname=='/mod/folder/view.php')
    {
        //학습활동 블록 숨김
                $('div.block-quick-mod').addClass('hidden');

                $($("li",$("#settingsnav ul")).get(0)).css('background-color','#F5EFD7');
                var link;
                $("li",$('#settingsnav li.type_setting ul')).each(function(i) {
                        link=$(this).find('a').attr('href');
                        if(link.indexOf('/admin/roles/')>-1||link.indexOf('/filter/')>-1||link.indexOf('/report/log/')>-1||link.indexOf('/backup/')>-1) { $(this).html(''); }
                });
        
        $('div.singlebutton input[type=submit]').css('color','#fff').css('background-color','#5bc0de ').css('border-color','#46b8da ').on("mouseover",function() { $(this).css('background-color','#31b0d5').css('border-color','#269abc');  }).on("mouseout",function() { $(this).css('background-color','#5bc0de').css('border-color','#46b8da');  });
        
    }

/********************************************
    동영상(resource_vod)
*********************************************/
//vod
    if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=vod')>-1) || isMForm.indexOf('mod_vod')>0) )
    {
        //$('#fitem_id_restricted').hide();
        $('#id_showplaytime').prop('checked', true);
        $('#fitem_id_showsize').hide();
        $('#fitem_id_showplaytime').hide();
        $('#id_vod_popup').addClass('collapsed');

                $('#id_submitbutton').hide();
                if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton2').val('저장'); }
    }

/********************************************
        econtents (resource_econtents)
*********************************************/
// econtents
        if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=econtents')>-1) || isMForm.indexOf('mod_econtents')>0) )
        {
                $('#id_submitbutton').hide();
                if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton2').val('저장'); }
        }

/********************************************
        콘텐츠 제작도구
*********************************************/
        if(url.pathname=='/course/modedit.php' && ( (url.search.indexOf('?add=xncommons')>-1) || isMForm.indexOf('mod_xncommons')>0) )
        {
                // 버튼 삭제
                $('#id_submitbutton').hide(); 
                if(theme_coursemosv2.lang=='ko') { $('#id_submitbutton2').val('저장'); }
        }

// 팀설정 
    if(url.pathname=='/group/autogroup.php'){
        $("#fitem_id_groupid").hide();
        $("#fitem_id_notingroup").hide();
    }


//강좌 설정 - 유비온 일반
    //이수과정 추적
    if(url.pathname=='/local/ubion/setting/course.php'){
        $("#enablecompletion").parent().parent().hide();
    }

    //강좌설정 - 고급설정
    if(url.pathname=='/course/edit.php'){
        $("#id_descriptionhdr").hide();
        $("#id_courseformathdr").hide();
        $("#fitem_id_lang").hide();
    }


// 성적
// 보기
    if(url.pathname=='/grade/report/grader/index.php')
    {
        var text_ko="합계점수는 직접 입력하실 수 없습니다. 성적항목관리에서 항목을 추가하신 후 점수를 입력하세요.";
        var text_en="Cannot insert total grade. Add grade item at 'Setup' page first and enter grade.";

        var text_ko2="입력한 점수는 자동저장 되므로 저장 버튼을 누를 필요가 없습니다.";
        var text_en2="Grade that you entered can be saved automatically, so you don't need to click 'Save' button.";

        var text=(theme_coursemosv2.lang=='ko') ? text_ko:text_en;
        var text2=(theme_coursemosv2.lang=='ko') ? text_ko2:text_en2;

        $('div.search_count h3').before('<div class="alert alert-warning">'+ text +'</div>');
        $('div.submit input').after('<span style="color:#CC0000;font-weight:bold;margin-left:20px;">' + text2  + '</span>');
    }
// 카테고리 설정
    if(url.pathname=='/grade/edit/tree/index.php')
{
//    $('#gradetreeform .generaltable .column-weight').hide();
//    $('#gradetreeform .generaltable .column-select').hide();
    $('#gradetreeform .generaltable .gradeitemdescription').hide();    

    $('#gradetreeform .generaltable .textmenu').html('<img src="/theme/image.php/coursemosv2/core/1468025184/i/settings" />');
    $('#gradetreeform .generaltable .column-actions').css('text-align','center');
//    $('#gradetreeform .generaltable .column-range').css('text-align','center');

//    $('#gradetreesubmit').hide();
}
// 개인성적표
    if(url.pathname=='/grade/report/user/index.php')
{
    $('.gradeitemdescription').hide();
}


// 성적이력
if(url.pathname=='/grade/report/history/index.php'){
    $('#mform2 fieldset div.fitemtitle').css('width','200px');
}

// 환경설정
if(url.pathname=='/grade/edit/settings/index.php'){
    $('#id_general').hide();
    $('#fitem_id_report_user_showgrade').hide();
}

// 성적항목관리>성적부설정
    if(url.pathname=='/grade/report/grader/preferences.php'){
        $('#id_prefshow').hide();
        $('#id_prefrows').hide();
    }

// 척도
if(url.pathname=='/grade/edit/scale/edit.php'){
    $('#fitem_id_standard').hide();
    $('#fitem_id_description_editor').hide();
}
// 가져오기
// csv
    if(url.pathname=='/grade/import/csv/index.php' || url.pathname=='/grade/import/direct/index.php')
    {
        $('#fitem_id_verbosescales').hide();
        $('#fitem_id_previewrows').hide();
        $('#fitem_id_forceimport').hide();

        $('#id_mapto').val("useridnumber").prop("selected", true);
        $('#fitem_id_mapto').hide();
    }

// 내보내기
    if(url.pathname=='/grade/export/xls/index.php')
    {
        $('.tabs-sub').hide();
        $('#fitem_id_export_feedback').hide();
        $('#fitem_id_export_onlyactive').hide();
    }


    // 이화대학교
    if(url.hostname == 'cyber.ewha.ac.kr' || url.hostname == 'newcyber.moodler.co.kr') {
         // =====================================================================
         // 성적표
         // =====================================================================
        switch (url.pathname)
        {
         // 성적항목관리 가중치 무조건 체크처리
         case '/grade/edit/tree/index.php':
            if (url.search.indexOf('?id=')>-1 && $('td input[type="checkbox"].weightoverride').length) {
                $('td > input[type="checkbox"].weightoverride').prop('checked', true);
                $('.weightoverride').next().next().removeAttr("disabled");

                $('th.column-weight').html('평가비율');
                $('th.column-range').html('총점');
            }
            break;

        // 성적표의 타이틀 변경
         case '/grade/report/user/index.php':
            if (url.search.indexOf('?id=')>-1 && $('th#contributiontocoursetotal').length) {
                $('th#weight').html('평가비율');
                $('th#grade').html('취득점수');
                $('th#range').html('총점');
                $('th#contributiontocoursetotal').html('최종성적');
            }
            break;
        }
    }

    // *****************************************************************************
    // 배제대학교
    // *****************************************************************************
    if(url.hostname == 'cyber.pcu.ac.kr' || url.hostname == 'pculms.moodler.kr') 
    {
        switch (url.pathname)
        {
        case '/mod/forum/view.php':
            // 포럼 성적 버턴 활성화
            if ((url.search.indexOf('?id=')>-1) || (url.search.indexOf('?f=')>-1) ||  ( isMForm.indexOf('mod_forum')>-1 )) {
                $.ajax({
                    url: '/local/ubion/mod/forum/grade_button.php'+url.search,
                    cache: false
                })
                    .done(function( html ) {
                        $('body#page-mod-forum-view form#newdiscussionform div').prepend(html);
                });
                // $('body#page-mod-forum-view form#newdiscussionform div').prepend('<div><a href="/local/ubion/Asite/modules/activity/forum/grade.php'+url.search+'" class="btn btn-default btn-primary" style="display:inline-block;">점수 부여</a></div>');
            }
            
            break;
        }
    }


    // *****************************************************************************
    // 순천향대학교
    // *****************************************************************************
    if(url.hostname == 'myclass.sch.ac.kr' || url.hostname == 'schcyber.moodler.kr') {
        
        // 접근제한 설정
        $('body.coursemos-layout-course .availabilityinfo ').addClass('hide');
        $('body.editing .availabilityinfo ').removeClass('hide');

        // 성적부 - 숨김처리
        $('ul.coursemos-tabs li.tab_li_scale').addClass('hide');        // 척도
        $('ul.coursemos-tabs li.tab_li_import').addClass('hide');    // 내보내기

        switch (url.pathname)
        {
            // =====================================================================
			// 강좌 가져오기
			// =====================================================================
			case '/backup/import.php':
				$('#page-backup-import #id_submitbutton').css('float','none');
				$('#page-backup-import #id_submitbutton').css('margin-right','0px');
				break;
            // =====================================================================
			// 동영상
			// =====================================================================
            case '/mod/vod/view.php':
                $('#page-mod-vod-view.device_mobile #page-content #region-main .buttons').before('<br>');
                $('#page-mod-vod-view.device_mobile #page-content #region-main .buttons').after('<br><br><span style="color:red; font-weight:bold;">모바일에서는 진도체크를 지원하지 않습니다.</span>');
                break;
            // =====================================================================
            // 성적표
            // =====================================================================
            case '/grade/edit/tree/category.php':
                $('#id_grade_item_grademax').after('<span style="color:red; font-weight:bold;">※ 각 성적항목의 비율을 입력하세요.</span>');
                $('#id_general').removeClass('collapsed');
                break;
            case '/grade/edit/tree/index.php':
                // 성적항목관리 가중치 무조건 체크처리
                if (url.search.indexOf('?id=')>-1) {

					// 설명 문구 추가
					$('#page-grade-edit-tree-index #page-content .tabs-sub').after('<div style="position:relative; top:-10px; color:red; font-weight:bold; margin-bottom:10px;">성적항목은 카테고리 안에 포함이 되어야 합니다.  <br> 해당 카테고리 안으로 이동시켜 주세요.<br>(관리자문의: 041-530-1695)</div>');	

                    if ($('td input[type="checkbox"].weightoverride').length) {
                        $('td > input[type="checkbox"].weightoverride').prop('checked', true);
                        $('.weightoverride').next().next().removeAttr("disabled");
                        $('th.column-weight').html('평가비율');
                        $('th.column-range').html('총점');
                    }

                    // 성적부 / 성적항목관리의 성적표구성,옵션 숨김
                    if ($('li.tab_li_coursesettings').length) {
                        $('li.tab_li_coursesettings').addClass('hide');
                        $('li.tab_li_grader').addClass('hide');
                    }

                    // 가중치 항목 숨김처리
                    $('#grade_edit_tree_table .column-weight').hide(); 
                }
                break;
            case '/grade/report/user/index.php':
                // 성적표의 타이틀 변경
                if (url.search.indexOf('?id=')>-1 && $('th#contributiontocoursetotal').length) {
                    $('th#weight').html('평가비율');
                    $('th#grade').html('취득점수');
                    $('th#range').html('총점');
                    $('th#contributiontocoursetotal').html('최종성적');
                }
                break;
            case '/grade/export/xls/index.php':
                // 다운로드 버튼 상단으로 복사
                $('#id_gradeitems').before($('#fitem_id_submitbutton').parents('fieldset').html());
                break;
			case '/grade/report/grader/index.php':
					$('#page-grade-report-grader-index #page-content .tabs-sub').after('<div style="position:relative; top:-10px; color:red; font-weight:bold; margin-bottom:10px;">※수동 성적 입력 시 아래 순서를 참고하세요. <br><span style="color:#0370a6"><ol><li>우측상단의 편집 버튼을 먼저 클릭</li> <li>점수를 입력하면 자동으로 저장됨 (저장시 박스 색상 표시)</li></ol></span>※온라인출석부 성적을 반영하려면 온라인출석부에서 \'성적부 반영\' 버튼을 클릭해 주세요.</div>');
					
					// 하단의 저장버튼을 복사하여 상단으로 배치
					// $('form#gradereport_grader .gradeparent').prepend($('form#gradereport_grader .submit').html()+'<div style="height:10px;"></div>');
				break;
            // =====================================================================
            // 학습활동/학습자원
            // =====================================================================
            case '/course/modedit.php':
                if ((url.search.indexOf('?add=assign')>-1) || ($('form.mform input[name="modulename"]').length && $('form.mform input[name="modulename"]').val() == 'assign')) {
                    $('#fitem_id_cutoffdate .fdate_time_selector').append('<br><span style="color:red; font-weight:bold;">※연장 기한은 종료 일시보다 이전 날짜로 설정 할 수 없습니다.<br>&nbsp;&nbsp;종료 일시와 같거나 이후 날짜로 설정해주세요.</span>');
                }

                if ((url.search.indexOf('?add=assign')>-1) || isMForm.indexOf('mod_assign')>0) { // || form_modulename.indexOf('assign')>-1) {
                    $('#fitem_id_introattachments .ffilemanager .filemanager').before('<div style="color:red; font-weight:bold;margin-bottom:10px;">첨부파일은 과제 등록(제출기간과 상관 없음)과 동시에 학생들이 다운로드 가능합니다.</div>');
                }

                // 포럼 생성시 평가항목 자동 설정
                if ((url.search.indexOf('?add=forum')>-1) && isMForm.indexOf('mod_forum')>0)  {
                    if ($('#fitem_id_assessed select#id_assessed').length) {
                        $('#fitem_id_assessed select#id_assessed').val('1').prop('selected', true);
                        // $('#fitem_id_assessed').addClass('hide');
                    }
                }
                break;
            case '/mod/assign/view.php':
                // 간단한 내부 검색 기능 추가
                if ($('body#page-mod-assign-view .urlselect').length) {
                    $('body#page-mod-assign-view .urlselect form').css('display', 'inline-block');
                    $('body#page-mod-assign-view .urlselect form').after('&nbsp;<input type="text" name="js_search" value="" placeholder="이름/학번" class="input-js-search form-control" style="display:inline-block; width:150px;"> <a class="btn btn-primary btn-js-search">검색</a>');
                    $('body#page-mod-assign-view .urlselect .btn-js-search').on('click', function(e) {
                        e.preventDefault();
                        var js_search_keyword = $('body#page-mod-assign-view .urlselect input.input-js-search').val();
                        if (js_search_keyword != '') {
                            $('body#page-mod-assign-view form#mform3 table.flexible tbody tr').hide();
                            $('body#page-mod-assign-view form#mform3 table.flexible tbody tr td.idnumber').each(function(index) { if($(this).text()==js_search_keyword) $(this).parents('tr').show(); })
                            $('body#page-mod-assign-view form#mform3 table.flexible tbody tr td.c2').each(function(index) { if($(this).text()==js_search_keyword) $(this).parents('tr').show(); })
                        } else {
                            $('body#page-mod-assign-view form#mform3 table.flexible tbody tr').show();
                        }
                        $(document).on('keypress', 'body#page-mod-assign-view .urlselect input.input-js-search', function(e) {
                            if (e.which == 13) {
                                e.preventDefault();
                                $('body#page-mod-assign-view .urlselect .btn-js-search').trigger('click');
                            }
                        });
                        $(document).on('focus', 'body#page-mod-assign-view .urlselect input.input-js-search', function(e) {
                            $(this).select();
                        });
                    });
                }
                break;
            case '/mod/forum/view.php':
                // 포럼 성적 버턴 활성화
                if ((url.search.indexOf('?id=')>-1) || (url.search.indexOf('?f=')>-1) ||  ( isMForm.indexOf('mod_forum')>-1 )) {
                    $.ajax({
                        url: '/local/ubion/mod/forum/grade_button.php'+url.search,
                        cache: false
                    })
                        .done(function( html ) {
                            $('body#page-mod-forum-view form#newdiscussionform div').prepend(html);
                    });
                    // $('body#page-mod-forum-view form#newdiscussionform div').prepend('<div><a href="/local/ubion/Asite/modules/activity/forum/grade.php'+url.search+'" class="btn btn-default btn-primary" style="display:inline-block;">점수 부여</a></div>');
                }
                
                break;
            case '/mod/ubboard/article.php':
                // 게시판 글의 링크는 모두 새창으로 띄우기
                $('#page-mod-ubboard-view #page #region-main .ubboard_view .content a').attr('target', '_blank');
                break;
            case '/mod/quiz/summary.php':
            case '/mod/quiz/attempt.php':

                // 퀴즈창 닫기 이벤트 저장 - 스크립트 시작
                var link_was_clicked = '';
                document.addEventListener("click", function(e) {
                    if (e.target.nodeName.toLowerCase()) {
                        switch(e.target.nodeName.toLowerCase()) {
                            case 'a':
                            case 'form':
                            case 'span':
                            case 'input':
                                link_was_clicked = e.target.nodeName;
                            break;
                            default:
                                console.log(e.target.nodeName.toLowerCase());
                        }
                    }
                }, true);

                // Check close of windows 
                $(window).on('beforeunload', function(e) {
                    if (link_was_clicked == '') {

                        // Time Over에 따른 이동시에는 이벤트 추가 안함
                        if ($('input[name=timeup]').length && $('input[name=timeup]').val() == 1) return;

                        // Page Name
                        var page_name = '';
                        if (url.pathname == '/mod/quiz/summary.php') page_name= 'summary';
                        else page_name= 'attempt';

                        // get id of attempt
                        var attempt = 0;
                        if ($("body#page-mod-quiz-attempt #region-main form#responseform input[name='attempt']").length)
                            attempt = $("body#page-mod-quiz-attempt #region-main form#responseform input[name='attempt']").val();
                        if (attempt == null || attempt == 0 || !$("body#page-mod-quiz-summary .singlebutton form input[name='attempt']")) 
                            attempt = $("body#page-mod-quiz-summary .singlebutton form input[name='attempt']").val();
                        if (attempt == null || attempt == 0) {
                            console.log('attempt is not set');
                            return null;
                        }

                        // transfer Event
                        $.ajax({url:M.cfg.wwwroot + '/local/ubion/mod/quiz/event.php?attempt='+attempt+'&page_name='+page_name, async:false});
                    } 
                    return ;
                });
                // 퀴즈창 닫기 이벤트 저장 - 스크립트 종료

                break;
            case '/mod/quiz/report.php':
                // 퀴즈 결과 설정에서 응시 대상자 선택하면 하단 보고서 설정 레이어 펼침 처리
                $('#id_attempts').on('change', function(e) {
                    if ($('body#page-mod-quiz-report #id_preferencesuser .ftoggler a.fheader').attr('aria-expanded').length > 0 && $('#id_preferencesuser .ftoggler a.fheader').attr('aria-expanded') == 'false')
                    {
                        $('body#page-mod-quiz-report #id_preferencesuser').removeClass('collapsed');
                        $('body#page-mod-quiz-report #id_preferencesuser .ftoggler a.fheader').attr('aria-expanded', 'true');
                    }
                });
                break;
        }
    }

    // *****************************************************************************
    // 서울대학교
    // *****************************************************************************
    if(url.hostname == 'snulmscm3.moodler.kr' || url.hostname == 'etl.snu.ac.kr') {
        switch(url.pathname) {
            // =====================================================================
            // 강좌이수완료 설정
            // =====================================================================
            case '/course/completion.php':
                $('#id_activitiescompleted .fcontainer').prepend('<div class="fitem" style="padding:10px 16px; background-color: #eee; margin: -30px -30px 10px -30px;"><div class="fitemtitle"><label for="id_criteria_activity_all">전체선택</label></div><div class="felement fcheckbox"><span><input name="criteria_activity_all" type="checkbox" value="1" id="id_criteria_activity_all"></span></div></div>');
                $(document).on('click', '#id_activitiescompleted .fcontainer #id_criteria_activity_all', function(e) {
                    if ($(this).is(':checked'))
                    {
                        $('#id_activitiescompleted .fcontainer .fitem_fcheckbox .fcheckbox input[type="checkbox"]').prop('checked', true);
                        // $('#id_activitiescompleted .fcontainer .fitem_fcheckbox .fcheckbox input[type="check"]').attr('checked', true);
                    } else {
                        $('#id_activitiescompleted .fcontainer .fitem_fcheckbox .fcheckbox input[type="checkbox"]').prop('checked', false);
                        // $('#id_activitiescompleted .fcontainer .fitem_fcheckbox .fcheckbox input[type="check"]').attr('checked', false);
                    }
                });
            break;
        }
    }


    // *****************************************************************************
    // 강원대학교
    // *****************************************************************************
    if(url.hostname == 'knulms.moodler.kr' || url.hostname == 'eruri.kangwon.ac.kr') {
        switch(url.pathname) {
            // =====================================================================
            // 퀴즈 관련
            // =====================================================================
            case '/question/preview.php':
                $('#page-question-preview form .que .content .formulation span.subquestion input[type="text"]').css('width', '130px');
            break;
            case '/mod/quiz/review.php':
                $('#page-question-preview .multianswer .content .formulation span.subquestion input[type="text"]').css('width', '130px');
            break;
            case '/mod/quiz/attempt.php':
                $('#page-mod-quiz-attempt form .que .content .formulation span.subquestion input[type="text"]').css('width', '130px');
            break;
        }
    }


    // *****************************************************************************
    // 부산대학교
    // *****************************************************************************
    if(url.hostname == 'plms.pusan.ac.kr') {
        switch (url.pathname)
        {
            case '/local/ubonline/index.php':
                $('div.course-label').hide();
                $('li.tab_li_end').hide();
                $('ul.tabs-main').append('<li style="margin-top:20px;margin-left:30px;font-weight:bold;">※ 향후 공통 및 계열별로 나누어 제공할 예정입니다. </li>');
            break;
        }
    }

    // *****************************************************************************
    // 건국대학교
    // *****************************************************************************
    if(url.hostname == 'tls.kku.ac.kr') {
        switch (url.pathname)
        {
            case '/course/view.php':
                var coursename = $('div.coursename').text();
                if(coursename.indexOf('Cogito')>-1) {
                    $('ul.weeks #section-0 div.content ul.section').append('<li class="activity ubfile modtype_ubfile "><div><div class="mod-indent-outer"><div class="mod-indent"></div><div><div class="activityinstance"><a class="" onclick="" href="http://tls.kku.ac.kr/mod/ubfile/view.php?id=111889"><img src="http://tls.kku.ac.kr/theme/image.php/coursemosv2/core/1504586345/f/hwp-64" alt="파일" class="activityicon"><span class="instancename">Cogito 성찰일지<span class="accesshide "> 파일</span></span></a> <span class="displayoptions"><span class="text-info">&nbsp;10.5KB</span></span></div></div></div></div></li>');
                    if(coursename.indexOf('전공인성')>-1 || coursename.indexOf('인성함양')>-1) {
                        $('ul.weeks #section-0 div.content ul.section').append('<li class="activity url modtype_url "><div><div class="mod-indent-outer"><div class="mod-indent"></div><div><div class="activityinstance"><a class="" onclick="" href="http://www.ksdcdb.kr/answer.jsp?a=14309" target="_blank"><img src="http://tls.kku.ac.kr/local/ubion/pix/course_format/mod_icon/url.png" alt="URL" class="activityicon"><span class="instancename">Cogito 설문조사</span></a> </div></div></div></div></li>');
			$('ul.weeks #section-0 div.content ul.section').append('<li class="activity url modtype_url "><div><div class="mod-indent-outer"><div class="mod-indent"></div><div><div class="activityinstance"><a class="" onclick="" href="http://www.ksdcdb.kr/answer.jsp?a=15591" target="_blank"><img src="http://tls.kku.ac.kr/local/ubion/pix/course_format/mod_icon/url.png" alt="URL" class="activityicon"><span class="instancename">사후설문조사</span></a> </div></div></div></div></li>');
                    } else if(coursename.indexOf('자기계발')>-1) {
                        $('ul.weeks #section-0 div.content ul.section').append('<li class="activity url modtype_url "><div><div class="mod-indent-outer"><div class="mod-indent"></div><div><div class="activityinstance"><a class="" onclick="" href="http://www.ksdcdb.kr/answer.jsp?a=14401" target="_blank"><img src="http://tls.kku.ac.kr/local/ubion/pix/course_format/mod_icon/url.png" alt="URL" class="activityicon"><span class="instancename">Cogito 설문>조사</span></a> </div></div></div></div></li>');
			$('ul.weeks #section-0 div.content ul.section').append('<li class="activity url modtype_url "><div><div class="mod-indent-outer"><div class="mod-indent"></div><div><div class="activityinstance"><a class="" onclick="" href="http://www.ksdcdb.kr/answer.jsp?a=15592" target="_blank"><img src="http://tls.kku.ac.kr/local/ubion/pix/course_format/mod_icon/url.png" alt="URL" class="activityicon"><span class="instancename">사>후설문조사</span></a> </div></div></div></div></li>');
                    }
                }
            break;
        }
    }

    // *****************************************************************************
    // 가천대학교
    // *****************************************************************************
    if(url.hostname == 'cyber.gachon.ac.kr') {
        switch (url.pathname)
        {
            case '/mod/vod/view.php':
                $('#page-mod-vod-view.device_mobile #region-main .buttons').after('<br><span style="color:red; font-weight:bold;">출석인정기간 전 영상을 재생할 경우<br>출결에 반영되지 않습니다.</span>'); 
            break;
        }
    }

	// *****************************************************************************
    // 숭실대학교
    // *****************************************************************************
    if(url.hostname == 'myclass.ssu.ac.kr') {
        switch (url.pathname)
        {
            case '/local/ubion/setting/course.php':
                $('select#course_offlineattendance').prop('disabled', true); 
				$('select#course_offlineattendance').attr('disabled', 'disabled'); 
            break;
        }
    }
	
	// *****************************************************************************
    // 숭실대학교
    // *****************************************************************************
    if(url.hostname == 'ecampus.smu.ac.kr') {
		 switch (url.pathname)
        {
            case '/mod/feedback/view.php':
				$('#page-mod-feedback-view #region-main h2 a').remove()
				$('#page-mod-feedback-view #region-main .box a').before('<br>');
				$('#page-mod-feedback-view #region-main .box a').addClass('btn btn-primary');
				$('#page-mod-feedback-view #region-main .box a').css('font-weight', 'bold');
				$('#page-mod-feedback-view #region-main .box a').css('font-size', '13px');
				$('#page-mod-feedback-view #region-main .box a').closest('.box').css('text-align','center');
			break;
		}
	}

});


